	
	class Role {
		id;
		name;
		description;
		type;
	}
	class User {
		username;
        email;
        provider;
        confirmed;
        blocked;
		role;
        created_at;
        updated_at;
	}
	class Store {
		id;
		apelido;
		uuid;
		nome;
		aberto;
		ativo;
		created_at;
		updated_at;
	}
	class GroupOfProducts {
		id;
		uuid;
		created_at;
		updated_at;
		loja_uuid;
		nome;
		ativo;
		loja;
		empresa;
	}
	class Products {
		id;
		uuid;
		created_at;
		updated_at;
		descricao;
		descricao_longa;
		image_url;
		pizza;
		preco;
		ativo;
		empresa;
		grupo;
	}	
	class BorderPizza {
		id;
		uuid;
		created_at;
		updated_at;
		descricao;
		maximo_sabores;
		valor_tamanho;
		pizza;
		preco;
		ativo;
		empresa;
	}
	class SizePizza {
		id;
		uuid;
		created_at;
		updated_at;
		descricao;
		maximo_sabores;
		ativo;
		empresa;
	}
	const limityAppTime=10*60*1000;
	const serverUrl="http://209.145.62.221:1337/";
	var initialStoreAlias="pizzadorafa";
	var app = new Vue({
		el: '#divMain',
		
		data: {
			urlAutRequest:serverUrl+"auth/local",
			urlFindDataStore:serverUrl+"lojas",
			urlFindGroupOfProducts:serverUrl+"grupos",
			currentStoreAliasFind:initialStoreAlias,
			currentStoreAliasSelect:initialStoreAlias,
			urlFindProducts:serverUrl+"produtos",
			urlFindSizePizza:serverUrl+"tamanhos",
			urlFindBorderPizza:serverUrl+"bordas",
			bodyRequest:{
				"identifier": "food_api@nobresistemas.com",
				"password": "jT4h4MtUqkNjLkG"
			},
			startAppTime:(new Date())-limityAppTime,
			jwt:"",
			currentUser:new User(),
			currentStores:new Array(),
			currentGroupsOfProducts:new Array(),
			currentProducts:new Array(),
			currentSizesPizza:new Array(),
			currentBordersPizza:new Array(),
		},
		mounted: function() {
			//this.startApp();
		},
		methods: {
			async startApp() {
				var formData = app.toFormData(app.bodyRequest);
				try {
					const response = await  axios.post(app.urlAutRequest, formData,{headers:{"content-type":"application/json"}});
					app.currentUser=response.data.user;
					app.jwt=response.data.jwt;
					//console.log(app.currentUser);
					console.log(app.jwt);
					startAppTime=new Date();
				} catch (error) {console.log("Não foi Possível carregar o sistema!");}	
			},
			async  findDataStore() {
				if ((!((app.jwt!=null)&&(app.jwt.length>0)))||(((new Date())-app.startAppTime)>limityAppTime))
					await app.startApp();
				var data={apelido:app.currentStoreAliasFind};
				try {
					const response = await axios.get(app.urlFindDataStore+"?"+(new URLSearchParams(data)).toString(),{headers:{Authorization: ("Bearer "+app.jwt),"content-type":"application/json",}});
					app.currentStores=response.data;
					//console.log(app.currentStores);
					if(app.currentStores.length>0){
						app.currentStoreAliasSelect=app.currentStores[0].apelido;
						console.log(app.currentStoreAliasSelect);
					}
				} catch (error) {console.log("Falha ao buscar loja");}	
			},
			async findGroupOfProducts() {
				if ((!((app.jwt!=null)&&(app.jwt.length>0)))||(((new Date())-app.startAppTime)>limityAppTime))
					await app.findDataStore();
				else if (!((app.jwt!=null)&&(app.jwt.length>0)))
					await app.startApp();
				var data={"empresa.apelido":app.currentStoreAliasSelect,ativo:true};
				try {
					const response = await axios.get(app.urlFindGroupOfProducts+"?"+(new URLSearchParams(data)).toString(),{headers:{Authorization: ("Bearer "+app.jwt),"content-type":"application/json",}});
					app.currentGroupsOfProducts=response.data;
					app.currentGroupsOfProducts.forEach(function(element){
						console.log(element.nome);
					})
				} catch (error) {console.log("Falha ao buscar grupos de produtos");}	
			},
			async findProducts() {
				if(!((app.currentGroupsOfProducts!=null)&&(app.currentGroupsOfProducts.length>0)))
					await app.findGroupOfProducts();
				var data={"empresa.apelido":app.currentStoreAliasSelect,ativo:true};
				try {
					const response = await axios.get(app.urlFindProducts+"?"+(new URLSearchParams(data)).toString(),{headers:{Authorization: ("Bearer "+app.jwt),"content-type":"application/json",}});
					app.currentProducts=response.data;
					app.currentProducts.forEach(function(element){
						console.log(element.descricao);
					})
				} catch (error) {console.log("Falha ao buscar produtos");}	
			},
			async findSizesPizza() {
				if(!((app.currentProducts!=null)&&(app.currentProducts.length>0)))
					await app.findProducts();
				else if(!((app.currentGroupsOfProducts!=null)&&(app.currentGroupsOfProducts.length>0)))
					await app.findGroupOfProducts();
				var data={"empresa.apelido":app.currentStoreAliasSelect,ativo:true};
				try {
					const response = await axios.get(app.urlFindSizePizza+"?"+(new URLSearchParams(data)).toString(),{headers:{Authorization: ("Bearer "+app.jwt),"content-type":"application/json",}});
					app.currentSizesPizza=response.data;
					//console.log(response.data);
					app.currentSizesPizza.forEach(function(element){
						console.log(element.descricao);
					})
				} catch (error) {console.log("Falha ao buscar produtos");}	
			},
			async findBordersPizza() {
				if(!((app.currentProducts!=null)&&(app.currentProducts.length>0)))
					await app.findProducts();
				else if(!((app.currentGroupsOfProducts!=null)&&(app.currentGroupsOfProducts.length>0)))
					await app.findGroupOfProducts();
				var data={"empresa.apelido":app.currentStoreAliasSelect,ativo:true};
				try {
					const response = await axios.get(app.urlFindBorderPizza+"?"+(new URLSearchParams(data)).toString(),{headers:{Authorization: ("Bearer "+app.jwt),"content-type":"application/json",}});
					console.log(response.data);
					app.currentBordersPizza=response.data;
					app.currentBordersPizza.forEach(function(element){
						console.log(element.descricao);
					})
				} catch (error) {console.log("Falha ao buscar produtos");}	
			},
			toFormData(obj) {
				var fd = new FormData();
				for (var i in obj) {
					fd.append(i, obj[i]);
				}
				return fd;
			}
		}
	});
	app.findProducts();
	app.findSizesPizza();
	app.findBordersPizza();